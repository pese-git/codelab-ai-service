# ะัะปััะธะฐะณะตะฝัะฝะฐั ัะธััะตะผะฐ ะดะปั Agent Runtime

## ๐ ะะฑะทะพั

ะะพะปะฝะพัััั ัะตะฐะปะธะทะพะฒะฐะฝะฝะฐั ะผัะปััะธะฐะณะตะฝัะฝะฐั ัะธััะตะผะฐ ะดะปั Agent Runtime ัะตัะฒะธัะฐ ั 5 ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะผะธ ะฐะณะตะฝัะฐะผะธ.

**ะะตััะธั:** 1.0.0  
**ะะฐัะฐ:** 20 ัะฝะฒะฐัั 2026  
**ะกัะฐััั:** โ ะะตะฐะปะธะทะพะฒะฐะฝะพ ะธ ัะฐะฑะพัะฐะตั ะฒ production

---

## ๐ฏ ะฆะตะปั

ะกะพะทะดะฐัั ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัั ะผัะปััะธะฐะณะตะฝัะฝัั ัะธััะตะผั ั 5 ะฐะณะตะฝัะฐะผะธ, ะบะฐะถะดัะน ะธะท ะบะพัะพััั ัะฒะปัะตััั ัะบัะฟะตััะพะผ ะฒ ัะฒะพะตะน ะพะฑะปะฐััะธ:

- **Orchestrator** ๐ญ - ะณะปะฐะฒะฝัะน ะบะพะพัะดะธะฝะฐัะพั ะธ ะผะฐัััััะธะทะฐัะพั
- **Coder** ๐ป - ัะฐะทัะฐะฑะพััะธะบ ะบะพะดะฐ
- **Architect** ๐๏ธ - ะฟัะพะตะบัะธัะพะฒัะธะบ ะฐััะธัะตะบัััั
- **Debug** ๐ - ะพัะปะฐะดัะธะบ ะธ ะดะธะฐะณะฝะพัั
- **Ask** ๐ฌ - ะบะพะฝััะปััะฐะฝั ะธ ััะธัะตะปั

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### 1. [ะัััััะน ััะฐัั](./multi-agent-quick-start.md)
ะัะฐัะบะพะต ะฒะฒะตะดะตะฝะธะต ั ะฟัะธะผะตัะฐะผะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะธ ะพัะฝะพะฒะฝัะผะธ ะบะพะฝัะตะฟัะธัะผะธ.

**ะกะพะดะตัะถะธั:**
- ะะฑะทะพั ะฐะณะตะฝัะพะฒ
- ะัะธะผะตัั API ะทะฐะฟัะพัะพะฒ
- ะขะธะฟะธัะฝัะต ััะตะฝะฐัะธะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- ะะณัะฐะฝะธัะตะฝะธั ะฐะณะตะฝัะพะฒ

### 2. [ะััะธัะตะบัััะฐ ะธ ะฟะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ](./multi-agent-architecture-plan.md)
ะะตัะฐะปัะฝัะน ะฟะปะฐะฝ ะฐััะธัะตะบัััั ั ะฟัะธะผะตัะฐะผะธ ะบะพะดะฐ ะธ ััะฐะฟะฐะผะธ ัะตะฐะปะธะทะฐัะธะธ.

**ะกะพะดะตัะถะธั:**
- ะะฝะฐะปะธะท ัะตะบััะตะน ะฐััะธัะตะบัััั
- ะฆะตะปะตะฒะฐั ะฐััะธัะตะบัััะฐ
- ะกัััะบัััะฐ ะบะปะฐััะพะฒ ะธ ะผะพะดัะปะตะน
- ะัะธะผะตัั ัะตะฐะปะธะทะฐัะธะธ
- ะะฝัะตะณัะฐัะธั ั Gateway ะธ IDE

### 3. [ะะธะฐะณัะฐะผะผั ะฐััะธัะตะบัััั](./multi-agent-architecture-diagram.md)
ะะธะทัะฐะปะธะทะฐัะธั ะฐััะธัะตะบัััั ัะตัะตะท Mermaid ะดะธะฐะณัะฐะผะผั.

**ะกะพะดะตัะถะธั:**
- ะะฑัะฐั ะฐััะธัะตะบัััะฐ ัะธััะตะผั
- ะะพัะพะบ ะพะฑัะฐะฑะพัะบะธ ัะพะพะฑัะตะฝะธะน
- ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ะฐะณะตะฝัะฐะผะธ
- ะกัััะบัััะฐ ะบะปะฐััะพะฒ
- ะะพัะพะบ ะดะฐะฝะฝัั ะฒ ัะตััะธะธ
- ะะธะทะฝะตะฝะฝัะน ัะธะบะป ัะตััะธะธ

---

## ๐ ะัััััะน ััะฐัั

### ะัะฝะพะฒะฝะฐั ะธะดะตั

```
User Message โ Orchestrator โ ะกะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะะณะตะฝั โ LLM โ Tools โ Result
```

### ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

```bash
# ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต ะฐะณะตะฝัะฐ
curl -X POST http://localhost:8001/agent/message/stream \
  -H "Content-Type: application/json" \
  -H "X-Internal-Auth: your-key" \
  -d '{
    "session_id": "session_123",
    "message": {
      "type": "user_message",
      "content": "Create a new widget"
    }
  }'

# ะะตะทัะปััะฐั: Orchestrator โ Coder (ะฐะฒัะพะผะฐัะธัะตัะบะธ)
```

---

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           Multi-Agent Orchestrator              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ         Agent Router & Context            โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                  โ
โ  โโโโโโโโ โโโโโโโโ โโโโโโโโ โโโโโโโโ โโโโโโโโ โ
โ  โ Orch โ โCoder โ โArch  โ โDebug โ โ Ask  โ โ
โ  โโโโโโโโ โโโโโโโโ โโโโโโโโ โโโโโโโโ โโโโโโโโ โ
โ                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ         LLM Stream Service                โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะกะฟะตัะธะฐะปะธะทะฐัะธั ะฐะณะตะฝัะพะฒ

| ะะณะตะฝั | ะะฝััััะผะตะฝัั | ะะณัะฐะฝะธัะตะฝะธั |
|-------|-------------|-------------|
| **Orchestrator** | read_file, list_files, search_in_code | ะขะพะปัะบะพ ะฐะฝะฐะปะธะท |
| **Coder** | ะัะต ะธะฝััััะผะตะฝัั (9) | ะะตั ะพะณัะฐะฝะธัะตะฝะธะน |
| **Architect** | read_file, write_file, list_files, search_in_code | ะขะพะปัะบะพ .md ัะฐะนะปั |
| **Debug** | read_file, list_files, search_in_code, execute_command | ะะตะท write_file |
| **Ask** | read_file, search_in_code, list_files | ะขะพะปัะบะพ ััะตะฝะธะต |

---

## โ ะกัะฐััั ัะตะฐะปะธะทะฐัะธะธ

### ะะตะฐะปะธะทะพะฒะฐะฝะพ

- โ **ะะฐะทะพะฒะฐั ะธะฝััะฐััััะบัััะฐ**
  - BaseAgent ะบะปะฐัั ั AgentType enum
  - AgentContext ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะพััะพัะฝะธะตะผ
  - AgentRouter ะดะปั ัะตะณะธัััะฐัะธะธ ะธ ะผะฐัััััะธะทะฐัะธะธ
  - MultiAgentOrchestrator ะดะปั ะบะพะพัะดะธะฝะฐัะธะธ

- โ **ะกะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ะฐะณะตะฝัั (5)**
  - Orchestrator - LLM-based ะบะปะฐััะธัะธะบะฐัะธั + fallback
  - Coder - ะฟะพะปะฝัะน ะดะพัััะฟ ะบะพ ะฒัะตะผ ะธะฝััััะผะตะฝัะฐะผ
  - Architect - ัะพะปัะบะพ .md ัะฐะนะปั
  - Debug - read-only ัะตะถะธะผ
  - Ask - ะผะธะฝะธะผะฐะปัะฝัะต ะธะฝััััะผะตะฝัั

- โ **ะัะพะผะฟัั**
  - 5 ะดะตัะฐะปัะฝัั ัะธััะตะผะฝัั ะฟัะพะผะฟัะพะฒ ะดะปั ะบะฐะถะดะพะณะพ ะฐะณะตะฝัะฐ
  - ะะฟะธัะฐะฝะธะต ะฒะพะทะผะพะถะฝะพััะตะน ะธ ะพะณัะฐะฝะธัะตะฝะธะน
  - Best practices ะธ ะฟัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

- โ **API Integration**
  - ะะฑะฝะพะฒะปะตะฝ `/agent/message/stream` endpoint
  - ะะพะฑะฐะฒะปะตะฝ `GET /agents` - ัะฟะธัะพะบ ะฐะณะตะฝัะพะฒ
  - ะะพะฑะฐะฒะปะตะฝ `GET /agents/{session_id}/current` - ัะตะบััะธะน ะฐะณะตะฝั
  - ะะพะดะดะตัะถะบะฐ `switch_agent` message type

- โ **ะขะตััะธัะพะฒะฐะฝะธะต**
  - 26+ unit-ัะตััะพะฒ (100% pass rate)
  - ะขะตััั ะธะฝะธัะธะฐะปะธะทะฐัะธะธ ะฐะณะตะฝัะพะฒ
  - ะขะตััั ะผะฐัััััะธะทะฐัะธะธ
  - ะขะตััั ะบะพะฝัะตะบััะฐ ะธ ะฟะตัะตะบะปััะตะฝะธะน
  - ะขะตััั ะพะณัะฐะฝะธัะตะฝะธะน ะดะพัััะฟะฐ

- โ **Gateway Integration**
  - WSAgentSwitched - ัะฒะตะดะพะผะปะตะฝะธะต ะพ ะฟะตัะตะบะปััะตะฝะธะธ
  - WSSwitchAgent - ะทะฐะฟัะพั ะฝะฐ ะฟะตัะตะบะปััะตะฝะธะต
  - ะะพะดะดะตัะถะบะฐ ะฒ WebSocket Handler

---

## ๐ ะกัะฐัะธััะธะบะฐ

### Agent Runtime
- **ะคะฐะนะปะพะฒ ัะพะทะดะฐะฝะพ:** 20+
- **ะกััะพะบ ะบะพะดะฐ:** ~2,400
- **ะขะตััะพะฒ:** 26+ (100% โ)
- **ะะณะตะฝัะพะฒ:** 5

### Gateway
- **ะคะฐะนะปะพะฒ ะธะทะผะตะฝะตะฝะพ:** 3
- **ะกััะพะบ ะดะพะฑะฐะฒะปะตะฝะพ:** ~60
- **WebSocket schemas:** 2 ะฝะพะฒัั

---

## ๐ง ะะพะฝัะธะณััะฐัะธั

```bash
# .env
AGENT_RUNTIME__MULTI_AGENT_MODE=true  # true ะดะปั ะผัะปััะธะฐะณะตะฝัะฝะพะณะพ ัะตะถะธะผะฐ
AGENT_RUNTIME__LLM_MODEL=gpt-4        # ะะพะดะตะปั ะดะปั Orchestrator
```

---

## ๐ ะัะธะผะตัั ััะตะฝะฐัะธะตะฒ

### ะกะพะทะดะฐะฝะธะต ะบะพะผะฟะพะฝะตะฝัะฐ
```
User: "Create a user profile widget"
โ Orchestrator ะฐะฝะฐะปะธะทะธััะตั
โ ะะตัะตะบะปััะฐะตััั ะฝะฐ Coder
โ Coder ัะพะทะดะฐะตั ัะฐะนะป
โ ะะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั
```

### ะัะปะฐะดะบะฐ ะพัะธะฑะบะธ
```
User: "Why null pointer exception?"
โ Orchestrator ะฐะฝะฐะปะธะทะธััะตั
โ ะะตัะตะบะปััะฐะตััั ะฝะฐ Debug
โ Debug ะฝะฐัะพะดะธั ะฟัะธัะธะฝั
โ User: "Fix it"
โ Debug ะฟะตัะตะบะปััะฐะตััั ะฝะฐ Coder
โ Coder ะธัะฟัะฐะฒะปัะตั
```

### ะัะพะตะบัะธัะพะฒะฐะฝะธะต
```
User: "Design auth system"
โ Orchestrator ะฐะฝะฐะปะธะทะธััะตั
โ ะะตัะตะบะปััะฐะตััั ะฝะฐ Architect
โ Architect ัะพะทะดะฐะตั ัะฟะตัะธัะธะบะฐัะธั
โ User: "Implement login"
โ Architect ะฟะตัะตะบะปััะฐะตััั ะฝะฐ Coder
โ Coder ัะตะฐะปะธะทัะตั
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- โ ะะณัะฐะฝะธัะตะฝะธั ะฝะฐ ะธะฝััััะผะตะฝัั ะดะปั ะบะฐะถะดะพะณะพ ะฐะณะตะฝัะฐ
- โ ะะฐะปะธะดะฐัะธั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ัะฐะนะปะพะฒ
- โ ะะพะฝััะพะปั ะพะฟะฐัะฝัั ะบะพะผะฐะฝะด
- โ ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ะดะตะนััะฒะธะน
- โ ะะณัะฐะฝะธัะตะฝะธะต ะบะพะปะธัะตััะฒะฐ ะฟะตัะตะบะปััะตะฝะธะน

---

## ๐จ ะะฝัะตะณัะฐัะธั ั IDE

### Gateway ะธะทะผะตะฝะตะฝะธั
1. โ ะะพะดะดะตัะถะบะฐ `agent_switched` ัะพะฑััะธะน
2. โ ะัะพะฑัะฐะถะตะฝะธะต ัะตะบััะตะณะพ ะฐะณะตะฝัะฐ ะฒ UI
3. โณ ะะฝะพะฟะบะธ ะฟะตัะตะบะปััะตะฝะธั ะฐะณะตะฝัะพะฒ (ะฟะปะฐะฝะธััะตััั)
4. โณ ะััะพัะธั ะฟะตัะตะบะปััะตะฝะธะน (ะฟะปะฐะฝะธััะตััั)

### IDE ะธะทะผะตะฝะตะฝะธั (ะฟะปะฐะฝะธััะตััั)
1. ะะฝะดะธะบะฐัะพั ัะตะบััะตะณะพ ะฐะณะตะฝัะฐ
2. ะฆะฒะตัะพะฒะฐั ะบะพะดะธัะพะฒะบะฐ ะฟะพ ะฐะณะตะฝัะฐะผ
3. ะััะพัะธั ะดะตะนััะฒะธะน ะฐะณะตะฝัะพะฒ
4. ะกัะฐัะธััะธะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

---

## ๐ ะะตััะธะบะธ ะธ ะผะพะฝะธัะพัะธะฝะณ

ะกะธััะตะผะฐ ะฟัะตะดะพััะฐะฒะปัะตั ะผะตััะธะบะธ ะดะปั:
- ะะพะปะธัะตััะฒะพ ะทะฐะฟัะพัะพะฒ ะบ ะบะฐะถะดะพะผั ะฐะณะตะฝัั
- ะัะตะผั ะพะฑัะฐะฑะพัะบะธ ะฟะพ ะฐะณะตะฝัะฐะผ
- ะะพะปะธัะตััะฒะพ ะฟะตัะตะบะปััะตะฝะธะน ะฐะณะตะฝัะพะฒ
- ะฃัะฟะตัะฝะพััั ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั
- ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะธะฝััััะผะตะฝัะพะฒ

ะะพัััะฟ ัะตัะตะท Event-Driven Architecture:
```python
from app.events.subscribers import metrics_collector

metrics = metrics_collector.get_metrics()
print(metrics["agent_switches"])
print(metrics["agent_processing"])
```

---

## ๐ฏ ะะปััะตะฒัะต ะฟัะตะธะผััะตััะฒะฐ

1. **ะกะฟะตัะธะฐะปะธะทะฐัะธั** - ะบะฐะถะดัะน ะฐะณะตะฝั ัะบัะฟะตัั ะฒ ัะฒะพะตะน ะพะฑะปะฐััะธ
2. **ะะตะทะพะฟะฐัะฝะพััั** - ัััะพะณะธะต ะพะณัะฐะฝะธัะตะฝะธั ะฝะฐ ะดะตะนััะฒะธั
3. **ะะธะฑะบะพััั** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะธ ัััะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต
4. **ะะฐะฑะปัะดะฐะตะผะพััั** - ะฟะพะปะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ะธ ะผะตััะธะบะธ
5. **ะะฐััะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัั ะฐะณะตะฝัะพะฒ
6. **ะกะพะฒะผะตััะธะผะพััั** - ัะฐะฑะพัะฐะตั ั ัััะตััะฒัััะตะน ะฐััะธัะตะบัััะพะน

---

## ๐ ะกะฒัะทะฐะฝะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

- [ะัััััะน ััะฐัั](./multi-agent-quick-start.md)
- [ะััะธัะตะบัััะฐ](./multi-agent-architecture-plan.md)
- [ะะธะฐะณัะฐะผะผั](./multi-agent-architecture-diagram.md)
- [Event-Driven Architecture](../agent-runtime/doc/EVENT_DRIVEN_ARCHITECTURE.md)
- [Agent Runtime README](../agent-runtime/README.md)
- [Gateway README](../gateway/README.md)

---

## ๐ ะะพะดะดะตัะถะบะฐ

ะะปั ะฒะพะฟัะพัะพะฒ ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั:
- ะะทััะธัะต ะดะพะบัะผะตะฝัะฐัะธั ะฒ ะฟะพััะดะบะต ะฟัะธะพัะธัะตัะฐ
- ะัะพะฒะตัััะต ะฟัะธะผะตัั ะฒ quick-start
- ะะฑัะฐัะธัะตัั ะบ ะดะธะฐะณัะฐะผะผะฐะผ ะดะปั ะฟะพะฝะธะผะฐะฝะธั ะฟะพัะพะบะพะฒ

---

**ะะตััะธั:** 1.0.0  
**ะะฐัะฐ:** 20 ัะฝะฒะฐัั 2026  
**ะกัะฐััั:** โ Production Ready

ยฉ 2026 CodeLab Contributors
